# Platform Architect Agent

- **バージョン**: 1.0
- **オーナー**: [担当者名]
- **作成日**: 2025-09-12

## 1. 目的 (Goal)
- 人間からの曖昧なビジネス要件を、実行可能な開発計画（ロードマップ、タスクリスト、子エージェントの設計書）に変換するプロセスを自動化し、プロジェクトの立ち上げ時間を90%削減する。

## 2. 責任範囲 (Scope & Boundary)
- **担当業務**:
  - ビジネス要件のヒアリングと分析
  - 技術アーキテクチャの基本設計
  - 開発ロードマップの策定
  - 専門スキルを持つ子エージェント（`Business Analyst`, `Tech Lead`等）の設計書を自動生成
  - 子エージェントへのタスク割り当てと進捗管理
- **アクセス許可システム**:
  - プロジェクト管理ツール (e.g., Jira, Asana): Read & Write
  - ドキュメント管理 (e.g., Google Drive, Confluence): Read & Write
  - ソースコードリポジトリ (e.g., GitHub): Read (初期段階)

## 3. 自律レベル (Autonomy Level)
- **レベル**: L2: 条件付き自動実行
- **理由**: 生成された設計書やロードマップは、最終的に人間のプロジェクトマネージャーが承認するため。ただし、承認後の子エージェント生成やタスク割り当ては自動で実行する。

## 4. 主要機能とアーキテクチャ
- **主要機能**:
  - 自然言語での要件定義
  - アーキテクチャ設計
  - 子エージェントの自動生成（設計書の作成）
  - タスクの分解と割り当て
- **アーキテクチャ概要**:
  - **Perception (知覚)**: 人間からのチャット入力、ドキュメントの更新をトリガーとする。
  - **Think (計画)**: ビジネス要件をLLMで解釈し、社内の開発標準や過去のプロジェクトドキュメントをRAGで参照しながら、最適なアーキテクチャと開発計画を立案。計画に基づき、生成すべき子エージェントのリストとそれぞれの設計書を作成する。
  - **Act (実行)**: 生成した設計書をドキュメント管理システムに保存し、プロジェクト管理ツールに初期タスクを登録する。
  - **Learn (学習)**: プロジェクト完了後、計画と実績の差分（工数、生成コードの品質など）を評価し、次回の計画精度を向上させるためのフィードバックループを構築する。

## 5. 利用データ (Data Sources)
- **データソース**:
  - 過去のプロジェクト設計書: `/data/curated/past_project_docs.jsonl`
  - 社内技術標準ドキュメント: `/data/curated/tech_standards.md`
  - 開発メンバーのスキルセット: `/data/curated/member_skills.csv` (将来的にエージェントのスキルセットに拡張)
- **データ規約**: [データ規約ドキュメントへのリンク]

## 6. 監査と安全 (Audit & Safety)
- **監査ログ**: 全ての意思決定プロセス（どの情報を基に、どの設計を選択したか）をログとして記録し、人間が追跡できるようにする。
- **緊急停止**: プロジェクトマネージャーが手動でエージェントの活動を一時停止できるインターフェースを提供する。
- **機密情報**: ビジネス要件に含まれる機密情報は、マスキング処理を施した上でログに記録する。

## 7. KPI (Key Performance Indicators)
- **計画作成時間**: 要件定義から開発タスクの作成完了までの所要時間。
- **計画の正確性**: 当初計画と実績の乖離率（工数、スケジュール）。
- **子エージェント生成成功率**: 設計書通りに子エージェントが機能する確率。

## 8. 開発ロードマップ
- **フェーズ1 (PoC)**:
  - **目標**: 親エージェントが子エージェントの**設計書を自動生成**できることを確認する。
  - **内容**:
    1. `Platform Architect Agent`の基本機能を実装する。
    2. 簡単な要件（例：「ログイン機能付きのブログサイト」）を入力する。
    3. `Tech Lead Agent`と`Frontend Developer Agent`の設計書（Markdownファイル）が自動で生成されることを確認する。
- **フェーズ2 (拡張)**:
  - **目標**: 生成された子エージェントが実際にタスク（コード生成など）を実行できることを確認する。
  - **内容**: PoCで生成された`Frontend Developer Agent`が、設計書に基づいてログインページの雛形コード（HTML/CSS/JS）を生成する機能を実装する。
- **フェーズ3 (実運用)**:
  - **目標**: 複数のエージェントが連携し、小規模なアプリケーションを自律的に開発できる状態を目指す。
  - **内容**: `Backend Agent`や`QA Agent`を追加し、API開発、テスト、デプロイまでを自動化するワークフローを構築する。

---

## 9. 技術スタック (PoCフェーズ)
このエージェントのPoC（概念実証）フェーズでは、以下のGoogle Cloudを中心とした最新の技術スタックを採用する。

| カテゴリ | 推奨サービス | 備考 |
| :--- | :--- | :--- |
| **LLM** | **Gemini 2.0 Pro (on Vertex AI)** | 高度な推論能力が求められる設計書生成タスクに最適。 |
| **実行環境** | **Cloud Run** | サーバーレスのコンテナ実行環境。迅速なデプロイと自動スケールを実現。 |
| **Webフレームワーク** | **Flask** | 軽量なPython Webフレームワーク。APIエンドポイントの作成に使用。 |
| **認証** | **Workload Identity 連携** | キーファイル不要の、GCPで最も安全な推奨認証方式。 |
| **CI/CD** | **Cloud Build** | GCPネイティブのCI/CDサービス。ビルドからデプロイまでを自動化。 |
| **機密情報管理** | **Secret Manager** | APIキーなどの機密情報を安全に保管。 |
| **ソースコード管理**| **Cloud Source Repositories** | GCPネイティブのプライベートGitリポジトリ。 |
